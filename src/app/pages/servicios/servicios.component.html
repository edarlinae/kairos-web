<section class="servicios-hero">
  <div class="wrap">
    <h1 class="brand font-cinzel">Servicios Kairós</h1>
    <p class="lead">
      Cuidamos tu bienestar en cuerpo, mente y conexión social, tanto en persona como en línea.
    </p>

    <div class="cta-row">
      <a routerLink="/agenda" class="btn btn-primary btn-white-text">Agenda</a>
      <a routerLink="/contacto" class="btn btn-outline">Reservar</a>
      <a routerLink="/comunidad" class="btn btn-ghost">Unirme a la Comunidad</a>
    </div>

    <small class="note">Talleres y charlas de bienestar.</small>
  </div>
</section>

<!-- Qué ofrecemos -->
<section class="ofrecemos">
  <div class="wrap">
    <h2 class="font-cinzel">¿Qué ofrecemos?</h2>

    <div class="features">
      <article class="feature">
        <h3>Talleres presenciales</h3>
        <p>Dinámicas prácticas de gestión del estrés, meditación guiada, movimiento suave y creatividad.</p>
      </article>

      <article class="feature">
        <h3>Comunidad online</h3>
        <p>Programas digitales con meditaciones, retos semanales, recordatorios y acompañamiento del equipo.</p>
      </article>

      <article class="feature">
        <h3>Recursos y seguimiento</h3>
        <p>Bitácora personal, métricas sencillas y recomendaciones para sostener hábitos saludables.</p>
      </article>
    </div>
  </div>
</section>

<!-- Planes / Acceso -->
<section class="planes">
  <div class="wrap">
    <h2 class="font-cinzel">Elige tu acceso</h2>

    <div class="cards">
      <article class="card">
        <div class="pill">Aplicación Online</div>
        <h3>Acceso 24/7</h3>
        <p class="muted">Desde 10–15&nbsp;€/mes</p>
        <ul class="list">
          <li>Meditaciones y respiraciones guiadas</li>
          <li>Retos semanales con recordatorios</li>
          <li>Bitácora personal y métricas sencillas</li>
          <li>Foro moderado y apoyo del equipo</li>
        </ul>
        <a routerLink="/comunidad" class="btn btn-primary btn-white-text">Unirme a la Comunidad</a>
        <small class="subnote">Cancela cuando quieras.</small>
      </article>

      <article class="card">
        <div class="pill">Presencial</div>
        <h3>Talleres puntuales</h3>
        <p class="muted">Reserva por sesión</p>
        <ul class="list">
          <li>Gestión del estrés y relajación</li>
          <li>Meditación guiada y movimiento suave</li>
          <li>Herramientas prácticas para el día a día</li>
        </ul>
        <a routerLink="/agenda" class="btn btn-outline">Ver próximos talleres</a>
      </article>

      <article class="card">
        <div class="pill">Mixto</div>
        <h3>Pack mensual</h3>
        <p class="muted">App + 1 taller / mes</p>
        <ul class="list">
          <li>Acceso completo a la App</li>
          <li>Un taller grupal mensual</li>
          <li>Revisión breve de objetivos</li>
        </ul>
        <a routerLink="/contacto" class="btn btn-ghost">Solicitar información</a>
      </article>
    </div>
  </div>
</section>

<!-- Próximos talleres -->
<section class="proximos">
  <div class="wrap">
    <h2 class="font-cinzel">Próximos talleres</h2>

    <!-- Usa VM + async para pintar todo de una vez -->
    <ng-container *ngIf="upcoming$ | async as upcoming">
      <div class="grid" *ngIf="upcoming?.length; else noData">
        <ng-container *ngFor="let e of upcoming; trackBy: trackById">
          <article class="wk-card">
            <div class="date">
              <!-- VM SIN PIPES: evita render por fases -->
              <div class="day">{{ e.startDay }}</div>
              <div class="mon">{{ e.startMon }}</div>
            </div>

            <div class="info">
              <h3 class="title">{{ e.title }}</h3>
              <div class="meta">
                <span class="chip">{{ e.dateLine }}</span>
                <span class="chip" *ngIf="e.location">{{ e.location }}</span>
              </div>
              <div class="spots" *ngIf="e.spotsLeft !== undefined">Quedan {{ e.spotsLeft }} plazas</div>
              <div class="actions">
                <a routerLink="/contacto" class="btn btn-primary btn-white-text">Reservar</a>
              </div>
            </div>
          </article>
        </ng-container>
      </div>
    </ng-container>

    <ng-template #noData>
      <p class="muted">Muy pronto añadiremos nuevas fechas. Puedes consultar la <a routerLink="/agenda">agenda completa</a>.</p>
    </ng-template>

    <div class="cta-agenda">
      <a routerLink="/agenda" class="btn btn-outline">Ver toda la agenda</a>
    </div>
  </div>
</section>

<!-- Preguntas frecuentes -->
<section class="faq">
  <div class="wrap">
    <h2 class="font-cinzel">Preguntas frecuentes</h2>

    <div class="faq-list">
      <article class="faq-item" [class.open]="openIndex===0">
        <button class="faq-q" (click)="toggleFaq(0)">¿Qué incluye la Comunidad Online?</button>
        <div class="faq-a">
          <p>Acceso a meditaciones y respiraciones guiadas, retos semanales, recordatorios, bitácora personal, foro moderado y acompañamiento del equipo.</p>
        </div>
      </article>

      <article class="faq-item" [class.open]="openIndex===1">
        <button class="faq-q" (click)="toggleFaq(1)">¿Puedo asistir solo a un taller puntual sin unirme a la comunidad?</button>
        <div class="faq-a">
          <p>Sí, los talleres pueden reservarse de forma independiente desde la sección <a routerLink="/agenda">Agenda</a>.</p>
        </div>
      </article>

      <article class="faq-item" [class.open]="openIndex===2">
        <button class="faq-q" (click)="toggleFaq(2)">¿Cómo reservo plaza?</button>
        <div class="faq-a">
          <p>Desde la <a routerLink="/agenda">Agenda</a> puedes ver fechas, plazas disponibles y lugares, y hacer tu reserva. Si tienes dudas, escríbenos desde <a routerLink="/contacto">Contacto</a>.</p>
        </div>
      </article>

      <article class="faq-item" [class.open]="openIndex===3">
        <button class="faq-q" (click)="toggleFaq(3)">¿Qué necesito llevar a los talleres?</button>
        <div class="faq-a">
          <p>Nada especial: ropa cómoda. El material lo ponemos nosotros. Si es actividad en suelo, disponemos de esterillas y mantas.</p>
        </div>
      </article>
    </div>
  </div>
</section>
